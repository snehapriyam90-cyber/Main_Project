{% extends "admin_dashboard.html" %}
{% block content %}

<style>
    /* Gradient Header */
    .sales-header {
        background: linear-gradient(135deg, #198754, #20c997);
        color: #fff;
        border-radius: 20px;
        padding: 28px;
        box-shadow: 0 15px 35px rgba(0,0,0,0.15);
    }

    /* Glass summary cards */
    .glass-card {
        background: rgba(255,255,255,0.85);
        backdrop-filter: blur(10px);
        border-radius: 18px;
        padding: 20px;
        text-align: center;
        box-shadow: 0 10px 25px rgba(0,0,0,0.12);
        transition: all 0.3s ease;
    }

    .glass-card:hover {
        transform: translateY(-6px);
        box-shadow: 0 18px 40px rgba(0,0,0,0.2);
    }

    /* Product cards */
    .product-sale-card {
        border-radius: 20px;
        background: #ffffff;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        transition: 0.3s;
        position: relative;
        overflow: hidden;
    }

    .product-sale-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 6px;
        height: 100%;
        background: linear-gradient(to bottom, #198754, #20c997);
    }

    .product-sale-card:hover {
        transform: translateY(-5px);
    }

    .amount-pill {
        background: linear-gradient(135deg, #198754, #20c997);
        color: #fff;
        padding: 8px 16px;
        border-radius: 30px;
        font-weight: 600;
    }
</style>

<div class="container py-4">

    <!-- HEADER -->
    <div class="sales-header mb-5">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h3 class="fw-bold mb-1">
                    <i class="bi bi-cash-coin"></i> Farmer Sales Overview
                </h3>
                <p class="mb-0 opacity-75">
                    Performance summary of <strong>{{ farmer.username }}</strong>
                </p>
            </div>
            <a href="{% url 'admin_farmer_management' %}"
               class="btn btn-light btn-sm rounded-pill px-4">
                ← Back
            </a>
        </div>
    </div>

    <!-- SUMMARY SECTION -->
    <div class="row g-4 mb-5">

        <div class="col-md-4">
            <div class="glass-card">
                <i class="bi bi-bag-check-fill fs-1 text-primary"></i>
                <h6 class="text-muted mt-2">Total Orders</h6>
                <h2 class="fw-bold">{{ total_orders }}</h2>
            </div>
        </div>

        <div class="col-md-4">
            <div class="glass-card">
                <i class="bi bi-box-seam-fill fs-1 text-success"></i>
                <h6 class="text-muted mt-2">Total Quantity Sold</h6>
                <h2 class="fw-bold">{{ total_quantity }}</h2>
            </div>
        </div>

        <div class="col-md-4">
            <div class="glass-card">
                <i class="bi bi-currency-rupee fs-1 text-danger"></i>
                <h6 class="text-muted mt-2">Total Earnings</h6>
                <h2 class="fw-bold">₹ {{ total_earnings }}</h2>
            </div>
        </div>

    </div>

    <!-- PRODUCT SALES -->
    <h4 class="fw-bold mb-4">
        <i class="bi bi-grid-fill text-success"></i> Product-wise Sales
    </h4>

    {% if product_sales %}
        {% for product, data in product_sales.items %}
        <div class="product-sale-card p-4 mb-4">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h5 class="fw-bold mb-1">{{ product }}</h5>
                    <p class="mb-0 text-muted">
                        Quantity Sold:
                        <span class="fw-semibold">{{ data.quantity }}</span>
                    </p>
                </div>
                <div>
                    <span class="amount-pill">
                        ₹ {{ data.amount }}
                    </span>
                </div>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="text-center py-5 text-muted">
            <i class="bi bi-emoji-frown fs-1"></i>
            <p class="mt-2">No delivered sales available</p>
        </div>
    {% endif %}

</div>

{% endblock %}
